오늘은 TCP/IP 4계층에 대해 알아보자.

네트워크 통신은 OSI 7계층의 방식으로 체계적으로 다루고 있고, OSI 7계층 이론을 실제 사용하는 인터넷 표준이 TCP/IP 4계층 방식이다.



##  📌 OSI 7 계층?

- Open System Interconnection
- 다른 시스템간 원활한 통신을 위해 ISO(국제표준화기구)에서 제안한 통신 규약(Protocol)
- 다시 말해, **초기 여러 정보 통신 업체 장비들은 자신의 업체 장비들끼리만 연결이 되어 호환성이 없었고, 모든 시스템들의 상호 연결에 있어 문제없도록 표준을 정한것이 OSI 7계층!**



### 👉 OSI 7계층 구조

#### Layer 1: 물리 계층

- 네트워크의 기본 네트워크 하드웨어 전송 기술
- 네트워크의 높은 수준의 기능의 논리 데이터 구조를 기초로 하는 필수 계층
- 다양한 특징의 하드웨어 기술이 접목되어 있기에 OSI 아키텍처에서 가장 복잡한 계층으로 간주된다.



#### Layer 2: 데이터 링크 계층

- 포인트 투 포인트(Point to Point) 간 신뢰성있는 전송을 보장하기 위한 계층
- 네트워크 위의 개체들 간 [데이터](https://ko.wikipedia.org/wiki/데이터)를 전달
- 프레임에 주소부여(MAC - 물리적주소)
- 에러검출/재전송/흐름제어



#### Layer 3: 네트워크 계층

- 경로를 찾아주는 역할을 하는 계층
- 라우팅, 흐름 제어, 세그멘테이션, 오류 제어, 인터네트워 등을 수행
- 주소부여(IP)



#### Layer 4: 전송 계층

- 종단간(end-to-end) 통신을 다루는 최하위 계층으로 종단간 신뢰성 있고 효율적인 데이터를 전송하며, 기능은 오류검출 및 복구와 흐름제어, 중복검사 등을 수행
- 패킷 생성
- 전송 계층이 패킷들의 전송이 유효한지 확인하고 전송 실패한 패킷들을 다시 전송 ex)TCP



#### Layer 5: 세션 계층

- TCP/IP 세션을 만들고 없애는 책임을 진다.
- 통신을 하기 위한 세션을 확립/유지/중단 (운영체제가 해줌)



#### Layer 6: 표현 계층

- 사용자의 명령어를 완성및 결과 표현
- 포장/압축/암호화



#### Layer 7: 응용 계층

- 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행
- 네트워크 소프트웨어 UI 부분
- 사용자의 입출력(I/O)부분



### 👉 계층별 프로토콜 데이터 유닛(PDU)

- 물리계층 - 비트
- 데이터링크 계층 - 프레임
- 네트워크 계층 - 패킷 
- 전송 계층 - 세그먼트
- 세션, 표현, 응용 계층 - 메시지



###  👉 OSI 7계층의 작동 원리

1. OSI 7계층은 응용, 표현, 세션, 전송, 네트워크, 데이터링크, 물리계층으로 나뉨.
2. 전송 시 7계층에서 1계층으로 각각의 층마다 인식할 수 있어야 하는 헤더를 붙임(캡슐화)
3. 수신 시 1계층에서 7계층으로 헤더를 떼어냄(디캡슐화)
4. 출발지에서 데이터가 전송될 때 헤더가 추가되는데 2계층에서만 오류제어를 위해 꼬리부분에 추가됌
5. 물리계층에서 1, 0 의 신호가 되어 전송매체 (동축케이블, 광섬유 등)을 통해 전송



------

## 📌 TCP/IP

- Transmission Control Protocol / Internet Protocol
- **현재의 인터넷에서 컴퓨터들이 서로 정보를 주고받는데 쓰이는 통신규약 (프로토콜)의 모음**
- TCP 프로토콜과 IP 프로토콜이 결합된 것



### TCP(Transmission Control Protoco)

- OSI 7계층의 전송 계층
- 데이터 주고받는 쌍방이 서로 인지(신뢰, 연결 지향적)
- 패킷 데이터를 보낸 순서대로 받고, 중간에 없어졌거나 망가지면 다시 요청하는 방식
- 패킷의 다중화, 순서 제어, 오류 제어, 흐름 제어 기능



### IP(nternet Protocol)

- OSI 7계층의 네트워크 계층
- 지정한 IP주소에 패킷을 빨리 목적지로 보내는 역할, 순서가 바뀌거나 누락되어도 상관X (비연결형)
- 패킷의 분해/조립, 주소 지정, 경로 선택기능





### 👉TCP/IP 계층 구조

#### Layer 4 : 응용 계층(Application Layer)

- 응용프로그램들이 네트워크서비스, 메일서비스, 웹서비스 등을 할 수 있도록 표준적인 인터페이스를 제공
- TCP/IP 기반의 응용 프로그램을 구분할 때 사용
- HTTP, FTP, Telnet, DNS



#### Layer 3 : 전송 계층(Transport Layer)

- 시스템을 연결하고 데이터를 전송하는 역할
- 통신 노드 간의 연결을 제어하고, 자료의 송수신을 담당
- TCP, UDP



#### Layer 2 : 인터넷 계층(Internet Layer)

- 데이터를 정의하고 데이터의 경로를 라우팅
- 통신 노드 간의 IP 패킷을 전송 및 라우팅 기능을 담당한다.
- IP, ARP, RARP



#### Layer 1 : 네트워크 액세스(Network Access Layer)

- OS의 네트워크 카드와 디바이스 드라이버 등과 같이 하드웨어적인 요소와 관련되 는 모든 것을 지원하는 계층이다.
- Ehternet(이더넷)





###  👉TCP/IP 4계층 데이터 통신 과정

1. 클라이언트가 특정 URL로 요청한다.
2. DNS에서 IP주소를 받아와 Application Layer에서 HTTP 메세지를 작성한다.
3. Tranpoot Layer에서 HTTP 메세지를 패킷으로 나눈다.
4. Internet Layer에서 IP주소를 이용하여 전송 위치를 확인한다.
5. 네트워크를 통해서 패킷을 전송한다.
6. 서버에서 정상적으로 패킷을 수신했다면, 같은 방식으로 클라이언트에게 응답한다.



------



##  📌 OSI 7계층과 TCP/IP 4계층의 차이

<img src="https://blog.kakaocdn.net/dn/cIKOBV/btrYEiATJ53/6JfjQk6bVzDWKk6aXrRTN1/img.png" alt="img" style="zoom: 50%;" />출처: https://hahahoho5915.tistory.com/15

> ** OSI 모델과 TCP/IP 모델 비교**
>
> - TCP/IP 프로토콜은 OSI 모델보다 먼저 개발되었다. 그러므로 TCP/IP 프로토콜의 계층은 OSI 모델의 계층과 정확하게 일치하지 않는다.
> - 두 계층을 비교할 때 , 세션(Session)과 표현(presentation) 2개의 계층이 TCP/IP프로토콜 그룹에 없다는 것을 알 수 있다.
> - 두 모델 모두 계층형 이라는 공통점을 가지고 있으며 **TCP/IP는 인터넷 개발 이후 계속 표준화되어 신뢰성이 우수**인 반면, OSI 7 Layer는 표준이 되기는 하지만 실제적으로 구현되는 예가 거의 없어 신뢰성이 저하되어있다.
> - OSI 7 Layer는 장비 개발과 통신 자체를 어떻게 표준으로 잡을지 사용되는 반면에 실 질적인 통신 자체는 TCP/IP 프로토콜을 사용한다.
>
> 출처: http://goitgo.tistory.com/25



